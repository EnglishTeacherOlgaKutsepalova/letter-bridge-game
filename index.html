<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Letter Bridge: Final Pro</title>
    <style>
        :root {
            --bg-url: url('https://EnglishTeacherOlgaKutsepalova.github.io/letter-bridge-game/location.png');
            --ui-bg: url('https://raw.githubusercontent.com/EnglishTeacherOlgaKutsepalova/letter-bridge-game/main/background.png');
            --hint-bg: url('https://raw.githubusercontent.com/EnglishTeacherOlgaKutsepalova/letter-bridge-game/main/background1.png');
            --word-bg: url('https://raw.githubusercontent.com/EnglishTeacherOlgaKutsepalova/letter-bridge-game/main/wordbackground.png');
            --slot-url: url('https://EnglishTeacherOlgaKutsepalova.github.io/letter-bridge-game/bridge-slot.png');
        }
        
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; display: flex; justify-content: center; align-items: center; }
        
        #game-viewport {
            position: relative;
            width: 1680px;
            height: 945px;
            background: var(--bg-url) no-repeat center center;
            background-size: cover;
            overflow: hidden;
        }

        #start-screen { position: absolute; inset: 0; display: flex; justify-content: center; align-items: center; z-index: 1000; background: rgba(0,0,0,0.6); }
        #start-button { cursor: pointer; width: 600px; }

        #dialog-box {
            display: none;
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 850px;
            height: 500px;
            background: var(--ui-bg) no-repeat center;
            background-size: contain;
            z-index: 500;
            padding: 80px 140px;
            text-align: center;
            box-sizing: border-box;
            cursor: pointer;
        }

        #hero-container {
            position: absolute;
            width: 150px;
            height: 150px;
            z-index: 100;
            transition: all 1.2s ease-in-out;
            display: none;
            transform: translate(-50%, -100%);
        }
        #hero { width: 100%; }

        #ui-layer {
            display: none;
            position: absolute;
            top: 30px; width: 100%;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            z-index: 50;
        }

        .target-card {
            background: var(--word-bg) no-repeat center;
            background-size: contain;
            padding: 25px 50px;
            display: flex; align-items: center; gap: 20px;
        }

        #bridge-slots { 
            background: var(--ui-bg) no-repeat center;
            background-size: 100% 100%;
            padding: 40px 60px;
            display: flex; gap: 8px; 
        }

        .slot, .letter-block { width: 170px; height: 110px; background-size: contain; background-repeat: no-repeat; background-position: center; }
        .slot { background-image: var(--slot-url); }

        #inventory {
            display: none;
            position: absolute;
            bottom: 30px; left: 50%;
            transform: translateX(-50%);
            gap: 20px;
            padding: 40px 80px;
            background: var(--hint-bg) no-repeat center;
            background-size: 100% 100%;
            min-width: 400px;
            justify-content: center;
            z-index: 50;
        }

        #progress-container { position: absolute; top: 0; width: 100%; height: 12px; background: rgba(0,0,0,0.4); z-index: 200; }
        #progress-bar { height: 100%; width: 0%; background: #2ecc71; transition: width 0.6s; }
    </style>
</head>
<body>

<div id="game-viewport">
    <div id="start-screen">
        <img id="start-button" src="https://raw.githubusercontent.com/EnglishTeacherOlgaKutsepalova/letter-bridge-game/main/startbutton.png" onclick="startGame()">
    </div>
    <div id="progress-container"><div id="progress-bar"></div></div>
    <div id="hero-container"><img id="hero" src="https://EnglishTeacherOlgaKutsepalova.github.io/letter-bridge-game/hero.png"></div>
    <div id="dialog-box" onclick="startFirstTask()"><p id="dialog-text" style="font-size: 26px; line-height: 1.4; color: #4a2f1b; font-weight: bold; margin-top: 60px;"></p></div>
    
    <div id="ui-layer">
        <div class="target-card">
            <img id="target-image" style="height: 70px;">
            <img src="https://EnglishTeacherOlgaKutsepalova.github.io/letter-bridge-game/dictation-btn.png" style="width: 45px; cursor: pointer;" onclick="game.playAudio()">
        </div>
        <div id="bridge-slots"></div>
        <button onclick="game.checkWord()" style="margin-top:10px; padding: 12px 35px; font-size: 22px; cursor: pointer; background: #f39c12; border: none; border-radius: 10px; color: white; font-weight: bold; box-shadow: 0 4px 0 #d35400;">Check Word</button>
    </div>
    <div id="inventory"></div>
</div>

<script>
const BASE = 'https://EnglishTeacherOlgaKutsepalova.github.io/letter-bridge-game/';

// Координаты обновлены (везде прибавлено +50 к X)
const PATH = [
    {x: 470, y: 472},  // 0 - Старт (+50 вправо)
    {x: 692, y: 651},  // 1
    {x: 937, y: 775},  // 2
    {x: 1213, y: 645}, // 3
    {x: 1067, y: 531}, // 4
    {x: 886, y: 462},  // 5
    {x: 1064, y: 410},
